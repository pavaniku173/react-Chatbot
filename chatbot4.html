<!DOCTYPE html>
<html>
    <head>
        <title>
            Chatbot Application
        </title>
    </head>
    <body>
        <div class="js-container"></div>

        <script src="https://unpkg.com/supersimpledev/react.js"></script>
        <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    
        <script src="https://unpkg.com/supersimpledev/babel.js"></script>
        <script type="text/babel">

            function ChatInput(){

                const [inputText, setInputText]=React.useState('');
                function saveInputText(event){
                    //console.log(event.target.value);
                    setInputText(event.target.value);

                }

                function sendMessage(){
                    console.log(inputText);
                    setChatMessages([
                        ...chatMessages,
                        {
                            message: 'how to use hooks?',
                            sender: "user",
                            id: crypto.randomUUID()
                        }
                    ]);

                }
                return(
                    <>
                    <input placeholder="send a message to chatbot" 
                    size="30" onChange={saveInputText}/>
                
                    <button onClick={sendMessage}>Send</button>
                    </>
                )
            }
            
            function ChatMessage({message, sender}){ //destructuring assignment
                 return(
                    <div>
                        {sender==='robot' && <img src="robot.png" width="50px" />}
                        {message}
                    { sender ==='user' && <img src="user.png" width="50px" />}
                    </div>
                );
            }
        function ChatMessages(){
            const [chatMessages, setChatMessages]= React.useState([{
                    message: "hello chatbot",
                    sender: "user",
                    id:"id1"

                },
                {
                    message: "Hello! How can I help you?",
                    sender: "robot",
                    id:"id2"
                },
                {
                    message: "can you get me todays date",
                    sender: "user",
                    id:"id3"
                },
                {
                    message: "Today is September 26",
                    sender: "robot",
                    id:"id4"
                },
                {
                    message: "how about coin flip?",
                    sender: "user",
                    id:"id5"
                },
                {
                    message: "Sure! You got tails",
                    sender: "robot",
                    id:"id6"

            }]);
                //function to add a new message to the chatMessages array
                /*function sendMessage(){
                    setChatMessages([
                        ...chatMessages,
                        {
                            message: 'how to use hooks?',
                            sender: "user",
                            id: crypto.randomUUID()
                        }
                    ]);
                    
                }*/


            return(
                <>
               {/* <button onClick={sendMessage}>send message</button>*/}
                    {chatMessages.map((chatMessage)=>{      //generate the UI/html
                        return (
                            <ChatMessage
                                message={chatMessage.message}
                                sender={chatMessage.sender}
                                key={chatMessage.id}
                            />
                        );
                    })}
                </>
            );
        }

        
            function App(){
            
                return (
                <>
                    <ChatInput />
                    <ChatMessages />
                </>
                );
            }
            
            const container = document.querySelector('.js-container');
            ReactDOM.createRoot(container).render(<App />);

        </script>
    </body>
</html>